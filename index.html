<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orders List</title>
    <style>
        .orders {
            width: 100%;
        }

        .order {
            border: 1px solid black;
            margin: 10px 0;
            padding: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .order-info:not(:last-child) {
            width: 150px;
        }


        .parts {
            display: none;
            width: 100%;
        }

        .part {
            margin: 5px 0;
            padding: 5px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid black;
        }

        .part:first-child {
            border-top: 1px solid black;
        }

        .part-info:not(:last-child) {
            width: 200px;
        }
    </style>
</head>

<body>

    <div id="orders"></div>

    <script>
        let ordersArray = [];

        (async function() {
            try {
                const response = await fetch('Mock Orders Array.json');
                if (!response.ok) {
                    throw new Error('Network response was not ok ' + response.statusText);
                }
                ordersArray = await response.json();
                
                const ordersDiv = document.getElementById('orders');
                ordersArray.forEach(order => {
                    const orderDiv = document.createElement('div');
                    const partsDiv = document.createElement('div');
                    orderDiv.classList.add('order');
                    partsDiv.classList.add('parts');
                    orderDiv.addEventListener('click', toggleParts);

                    orderDiv.innerHTML = `
                        <div class="order-info">
                            ${order.customer}
                        </div>

                        <div class="order-info">
                            ${order.orderType}
                        </div>

                        <div class="order-info">
                            ${order.bodyType}
                        </div>

                        <div class="order-info">
                            Due Date: ${order.dates.finishDate}
                        </div>

                        <div class="order-info status-info" onclick="editText(this)">
                            ${order.status}
                        </div>
                    `;

                    partsDiv.innerHTML = `
                    ${order.parts.map(part => `
                        <div class="part">
                            <div class="part-info">
                                ${part.name}
                            </div>

                            <div class="part-info" onclick="editText(this)">
                                ${part.assignee}
                            </div>

                            <div class="part-info" onclick="editText(this)">
                                ${part.assignDate}
                            </div>

                            <div class="part-info" onclick="editText(this)">
                                ${part.status}
                            </div>
                        </div>
                    `).join('')}
                    `;

                    ordersDiv.appendChild(orderDiv);
                    ordersDiv.appendChild(partsDiv)
                });
            } catch (error) {
                console.error('There has been a problem with your fetch operation:', error);
            }
        })();



        function toggleParts(event) {
            const parts = event.currentTarget.nextElementSibling;
            parts.style.display = parts.style.display === 'none' || parts.style.display === '' ? 'block' : 'none';
        }

        function editText(div) {
            div.contentEditable = true;
            event.stopPropagation();
            // Focus the div element to allow immediate editing
            div.focus();
        }



// Attach the event listener to the document
document.addEventListener("keydown", function(event) {
  // Check if the "Enter" key was pressed
  if (event.keyCode === 13) {
    // Remove focus from the currently focused element
    event.target.blur();
  }
});


    </script>

</body>

</html>
